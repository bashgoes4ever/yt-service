(function(e){function t(t){for(var a,r,u=t[0],i=t[1],l=t[2],s=0,d=[];s<u.length;s++)r=u[s],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&d.push(c[r][0]),c[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var u=n[r];0!==c[u]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},c={app:0},o=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-ab97d7a4":"00df1f89","chunk-2d0c9395":"37b191fe","chunk-785907d0":"11551d8c","chunk-7dc159f4":"ef3960ea","chunk-0df9b066":"9cbf026b","chunk-10cb0c04":"d015be10","chunk-2239db9c":"91daa134","chunk-64e8e5cc":"c6a740c3","chunk-2d0c8e41":"e1b09ca6","chunk-5714eb54":"1344894e","chunk-61e75f46":"a96fb948","chunk-58e6e451":"1e043293","chunk-b09871a4":"9b757ef2","chunk-14b8b708":"23f838ae","chunk-2d0aed26":"9b1aaca6","chunk-499365c7":"6b7c0864","chunk-6a81fc28":"ce0562a8","chunk-edbd96f6":"cfd3eadb","chunk-06accaaa":"6fea04af","chunk-66e677c9":"357866bc","chunk-82a840a8":"8e2f3ec9"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-ab97d7a4":1,"chunk-7dc159f4":1,"chunk-0df9b066":1,"chunk-10cb0c04":1,"chunk-2239db9c":1,"chunk-64e8e5cc":1,"chunk-5714eb54":1,"chunk-61e75f46":1,"chunk-b09871a4":1,"chunk-14b8b708":1,"chunk-499365c7":1,"chunk-6a81fc28":1,"chunk-edbd96f6":1,"chunk-06accaaa":1,"chunk-66e677c9":1,"chunk-82a840a8":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-ab97d7a4":"12a02a66","chunk-2d0c9395":"31d6cfe0","chunk-785907d0":"31d6cfe0","chunk-7dc159f4":"9cd84b48","chunk-0df9b066":"527573be","chunk-10cb0c04":"909c84fc","chunk-2239db9c":"8b010a0e","chunk-64e8e5cc":"eb4682a1","chunk-2d0c8e41":"31d6cfe0","chunk-5714eb54":"7fd157fc","chunk-61e75f46":"e1088565","chunk-58e6e451":"31d6cfe0","chunk-b09871a4":"fba5bb1e","chunk-14b8b708":"22a8acfc","chunk-2d0aed26":"31d6cfe0","chunk-499365c7":"49830f27","chunk-6a81fc28":"d9da8ea9","chunk-edbd96f6":"2b366a49","chunk-06accaaa":"ff8a3b82","chunk-66e677c9":"7877f8d7","chunk-82a840a8":"74bbaeab"}[e]+".css",c=i.p+a,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var l=o[u],s=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===a||s===c))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){l=d[u],s=l.getAttribute("data-href");if(s===a||s===c)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],h.parentNode.removeChild(h),n(o)},h.href=c;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[e]=0})));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=c[e]=[t,n]}));t.push(a[2]=o);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=u(e);var d=new Error;l=function(t){s.onerror=s.onload=null,clearTimeout(h);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}c[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("caad"),n("45fc"),n("2532"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[e.isLoggedIn?e._e():n("v-list-item",{attrs:{link:"",to:"/login"}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Вход")])],1)],1),e.isLoggedIn?n("v-list-item",{attrs:{link:"",to:"/accounts"}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Пользователи")])],1)],1):e._e(),e.isLoggedIn?n("v-list-item",{attrs:{link:"",to:"/plans"}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Планы")])],1)],1):e._e(),e.isLoggedIn?n("v-list-item",{attrs:{link:"",to:"/orders"}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Заказы")])],1)],1):e._e(),e.isLoggedIn?n("v-list-item",{attrs:{link:"",to:"/news"}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Новости")])],1)],1):e._e(),e.isLoggedIn?n("v-list-item",{attrs:{link:""},on:{click:e.logout}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Выход")])],1)],1):e._e()],1)],1),n("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Admin "+e._s(e.getUserData.email?"| "+e.getUserData.email:null))])],1),n("v-main",[n("router-view")],1),n("v-footer",{attrs:{color:"indigo"}},[n("span",{staticClass:"white--text"},[e._v("© 2019")])]),n("v-snackbar",{attrs:{color:e.alert.color,"multi-line":!0,right:!0,top:!0},model:{value:e.alert.active,callback:function(t){e.$set(e.alert,"active",t)},expression:"alert.active"}},[e._v(" "+e._s(e.alert.text)+" "),n("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.alert.active=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1)],1)},c=[],o=n("5530"),u=n("2f62"),i={name:"App",data:function(){return{drawer:null}},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])(["setAlert"])),{},{logout:function(){this.$store.dispatch("logout"),this.setAlert({active:!0,color:"info",text:"Вы вышли из аккаунта"}),this.$router.push("/login")}}),computed:Object(u["c"])(["alert","getUserData","isLoggedIn"])},l=i,s=n("2877"),d=n("6544"),h=n.n(d),f=n("7496"),m=n("40dc"),k=n("5bc1"),p=n("8336"),b=n("553a"),v=n("132d"),g=n("8860"),A=n("da13"),w=n("5d23"),_=n("f6c4"),y=n("f774"),P=n("2db4"),S=n("2a7f"),I=Object(s["a"])(l,r,c,!1,null,null,null),O=I.exports;h()(I,{VApp:f["a"],VAppBar:m["a"],VAppBarNavIcon:k["a"],VBtn:p["a"],VFooter:b["a"],VIcon:v["a"],VList:g["a"],VListItem:A["a"],VListItemContent:w["a"],VListItemTitle:w["b"],VMain:_["a"],VNavigationDrawer:y["a"],VSnackbar:P["a"],VToolbarTitle:S["a"]});var x=n("f309");a["a"].use(x["a"]);var q=new x["a"]({}),L=(n("d3b7"),n("8c4f"));a["a"].use(L["a"]);var j=new L["a"]({mode:"history",routes:[{path:"//panel",name:"home",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-2d0c9395")]).then(n.bind(null,"57da"))},meta:{title:"Home",requiresAuth:!0}},{path:"/panel/accounts",name:"accounts",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-0df9b066"),n.e("chunk-2239db9c")]).then(n.bind(null,"8f43"))},meta:{title:"Accounts",requiresAuth:!0}},{path:"/panel/accounts/add",name:"accounts",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-b09871a4"),n.e("chunk-14b8b708"),n.e("chunk-6a81fc28")]).then(n.bind(null,"5029"))},meta:{title:"Add Account",requiresAuth:!0}},{path:"/panel/accounts/:id",name:"edit account",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-b09871a4"),n.e("chunk-14b8b708"),n.e("chunk-edbd96f6")]).then(n.bind(null,"761b"))},meta:{title:"Edit Account",requiresAuth:!0}},{path:"/panel/logs",name:"logs",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-785907d0")]).then(n.bind(null,"46ec"))},meta:{title:"Logs",requiresAuth:!0}},{path:"/panel/plans",name:"plans",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-82a840a8")]).then(n.bind(null,"156b"))},meta:{title:"Plans",requiresAuth:!0}},{path:"/panel/plans/add",name:"plans",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-58e6e451")]).then(n.bind(null,"083a"))},meta:{title:"AddPlan",requiresAuth:!0}},{path:"/panel/plans/:id",name:"plans",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-b09871a4"),n.e("chunk-66e677c9")]).then(n.bind(null,"b6e4"))},meta:{title:"EditPlan",requiresAuth:!0}},{path:"/panel/orders",name:"orders",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-0df9b066"),n.e("chunk-10cb0c04")]).then(n.bind(null,"e58c"))},meta:{title:"Orders",requiresAuth:!0}},{path:"/panel/orders/add",name:"orders",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-b09871a4"),n.e("chunk-14b8b708"),n.e("chunk-499365c7")]).then(n.bind(null,"bcca"))},meta:{title:"AddOrder",requiresAuth:!0}},{path:"/panel/orders/:id",name:"orders",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-b09871a4"),n.e("chunk-14b8b708"),n.e("chunk-2d0aed26")]).then(n.bind(null,"0c63"))},meta:{title:"EditOrder",requiresAuth:!0}},{path:"/panel/news",name:"news",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-0df9b066"),n.e("chunk-64e8e5cc")]).then(n.bind(null,"e761"))},meta:{title:"News",requiresAuth:!0}},{path:"/panel/news/add",name:"news",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-5714eb54"),n.e("chunk-61e75f46")]).then(n.bind(null,"c830"))},meta:{title:"Add Article",requiresAuth:!0}},{path:"/panel/news/:id",name:"news",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-b09871a4"),n.e("chunk-5714eb54"),n.e("chunk-06accaaa")]).then(n.bind(null,"137d"))},meta:{title:"Edit Article",requiresAuth:!0}},{path:"/panel/login",name:"login",component:function(){return Promise.all([n.e("chunk-ab97d7a4"),n.e("chunk-7dc159f4"),n.e("chunk-2d0c8e41")]).then(n.bind(null,"578a"))},meta:{title:"Login"}}],scrollBehavior:function(){return{x:0,y:0}}}),E=n("bc3a"),V=n.n(E),N=n("a7fe"),T=n.n(N),C={state:{alert:{active:!1,color:"error",text:""}},mutations:{setAlert:function(e,t){e.alert.active=t.active,e.alert.color=t.color,e.alert.text=t.text}},actions:{setAlert:function(e,t){var n=e.commit;n("setAlert",t)}},getters:{alert:function(e){return e.alert}}},D={state:{status:"",token:localStorage.getItem("token")||"",user:JSON.parse(localStorage.getItem("user"))||""},mutations:{auth_request:function(e){e.status="loading"},auth_success:function(e,t){e.status="success",e.token=t.token,e.user=t.user},auth_error:function(e){e.status="error"},logout:function(e){e.status="",e.token=""}},actions:{login:function(e,t){var n=e.commit;return new Promise((function(e,a){n("auth_request"),V()({url:"".concat("http://188.120.245.208/","api/v1/users/login"),data:t,method:"POST"}).then((function(t){var a="Bearer "+t.data.token,r={email:t.data.email};localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("token",a),V.a.defaults.headers.common["Authorization"]=a,n("auth_success",{token:a,user:r}),n("setAlert",{active:!0,color:"success",text:"Вход выполнен"}),e(t)})).catch((function(e){n("auth_error"),localStorage.removeItem("token"),localStorage.removeItem("user"),n("setAlert",{active:!0,color:"error",text:e.response.data}),a(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e){t("logout"),localStorage.removeItem("user"),localStorage.removeItem("token"),delete V.a.defaults.headers.common["Authorization"],e()}))}},getters:{isLoggedIn:function(e){return!!e.token},authStatus:function(e){return e.status},getUserData:function(e){return e.user}}};a["a"].use(u["a"]);var B=new u["a"].Store({modules:{alert:C,user:D}});a["a"].config.productionTip=!1,V.a.defaults.xsrfCookieName="csrftoken",V.a.defaults.xsrfHeaderName="X-CSRFTOKEN",a["a"].prototype.$http=V.a;var U=localStorage.getItem("token");U&&(a["a"].prototype.$http.defaults.headers.common["Authorization"]=U),a["a"].use(T.a,V.a),j.beforeEach((function(e,t,n){if(document.title=e.meta.title,e.matched.some((function(e){return e.meta.requiresAuth}))){if((!e.meta.roleRequired||(!B.getters.getUserData.roles||B.getters.getUserData.roles.includes(e.meta.roleRequired)))&&B.getters.isLoggedIn)return void n();n("/login")}else n()})),new a["a"]({vuetify:q,router:j,store:B,render:function(e){return e(O)}}).$mount("#app")}});
//# sourceMappingURL=app.ad574db1.js.map